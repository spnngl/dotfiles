"    ▗
" ▌ ▌▄ ▛▚▀▖▙▀▖▞▀▖
" ▐▐ ▐ ▌▐ ▌▌  ▌ ▖
"  ▘ ▀▘▘▝ ▘▘  ▝▀

" first things first
set nocompatible noerrorbells
let mapleader = "à"
filetype on

" tidy
set viminfo+=n~/.vim/viminfo

source $HOME/.vim/rc/remap.vim
source $HOME/.vim/rc/plugin.vim

" auto-complete c "
set path=/usr/include,/usr/local/include,/usr/local/lib

" divers "
set modelines=0
set number
set cursorline
set incsearch hlsearch
set encoding=utf-8
set synmaxcol=256
set lazyredraw
set shell=/bin/mksh
set showcmd "showmatch
"set spell
"set wildignore=*.pyc,*.o
set history=2047
set hidden

" crypt
setlocal cm=blowfish2

" undo & backup & swap
set undofile undodir=~/.vim/undo undolevels=1000 "undoreload=1000
set nobackup nowritebackup backupdir=~/.vim/backup
set noswapfile

" good search
set ignorecase smartcase infercase

" indent options "
set tabstop=4 shiftwidth=4 expandtab
set autoindent

" folding "
"set foldmethod=indent
"set foldlevel=99
"nnoremap <space> za

" colors
colorscheme fahrenheit
syntax on
set colorcolumn=90
"hi ColorColumn ctermbg=lightgrey

" (au)commands
aug wscleaning
    au!
    " remove trailing whitespaces and ^M chars
    au BufWritePre <buffer> :call setline(1,map(getline(1,"$"),'substitute(v:val,"\\s\\+$","","")'))
    " remove eol blank line(s)
    au BufWritePre * silent! :%s#\($\n\s*\)\+\%$##
aug end

" spelling check
aug spelling
    au!
    au filetype tex  :setlocal spell spelllang=en
    au filetype markdown :setlocal spell spelllang=en
    au filetype gitcommit  :setlocal spell spelllang=en
aug end

" pdb killer
"au FileType python au BufUnload,BufWritePre * %s/\<pdb.set_trace\>/\#pdb.set_trace/g
" <buffer> pdb.set_trace I#<esc>

aug divers
    au!
    " remember cursor position
    au BufReadPost *
       \ if line("'\"") > 0 && line("'\"") <= line("$") |
       \ exe "normal g`\"" |
       \ endif
aug end

aug format
    au!
    au BufNewFile,BufRead *.cls set filetype=tex
aug end

" remove trailing white space
com! Nows :%s/\s\+$//

" remove blank lines
com! Nobl :g/^\s*$/d

onoremap in( :<c-u>normal! f(vi(<cr>
onoremap il( :<c-u>normal! F)vi(<cr>
